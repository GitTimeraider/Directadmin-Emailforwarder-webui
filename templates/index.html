<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Directadmin Email Forwarder Manager</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <div class="header-bar">
            <h1>Directadmin ðŸ“§ Forwarder Manager</h1>
            <div class="user-info">
                <span>Logged in as: <strong>{{ username }}</strong></span>
                <a href="/logout" class="btn btn-logout">Logout</a>
            </div>
        </div>

        <p class="domain-info">Managing forwarders for: <strong>{{ domain }}</strong></p>

        <div class="card">
            <h2>Create New Forwarder</h2>
            <form id="forwarder-form">
                <div class="form-group">
                    <label for="alias">Alias (without @domain):</label>
                    <input type="text" id="alias" name="alias" required 
                           placeholder="e.g., info, support, sales">
                </div>

                <div class="form-group">
                    <label for="destination-select">Forward to Email:</label>
                    <select id="destination-select" name="destination-select" class="destination-select" required>
                        <option value="">Loading email accounts...</option>
                    </select>

                    <div id="custom-destination-wrapper" class="custom-destination-wrapper" style="display: none;">
                        <input type="email" id="custom-destination" name="custom-destination" 
                               placeholder="Enter custom email address">
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Create Forwarder</button>
            </form>
        </div>

        <div class="card">
            <h2>Existing Forwarders</h2>
            <div class="debug-info">
                <button onclick="window.location.href='/api/debug-forwarders'" class="btn btn-secondary">
                    Debug API Response
                </button>
            </div>
            <div id="forwarders-list" class="forwarders-list">
                <p class="loading">Loading forwarders...</p>
            </div>
        </div>

        <div id="message" class="message"></div>
    </div>

    <script>
        window.DA_DOMAIN = "{{ domain }}";
    </script>
    <script src="/static/script.js"></script>
</body>
</html>
